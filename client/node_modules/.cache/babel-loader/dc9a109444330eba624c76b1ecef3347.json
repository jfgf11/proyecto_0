{"ast":null,"code":"import _slicedToArray from\"/home/jf.gaviria/Cloud_Computing/Proyectos/proyecto_0/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{BrowserRouter,Route}from\"react-router-dom\";import{useEffect,useState}from\"react\";import LoginPage from\"./components/LoginPage\";import RegisterPage from\"./components/RegisterPage\";import httpClients from\"./httpClients\";import EventsHandler from\"./components/EventsHandler\";// Context\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loggedIn=_useState2[0],setLoggedIn=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),userInfo=_useState4[0],setUserInfo=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),token=_useState6[0],setToken=_useState6[1];useEffect(function(){var newToken=sessionStorage.getItem('token');if(newToken&&newToken!=\"\"&&newToken!=undefined)setToken(newToken);httpClients.get('//172.24.41.232:8080/@me',{headers:{'Authorization':\"Bearer \"+newToken}}).then(function(response){setUserInfo(response.data);}).catch(function(e){setUserInfo(null);});},[token]);return/*#__PURE__*/_jsx(\"div\",{className:'container_center',children:token===''||token===undefined||!token?/*#__PURE__*/_jsxs(BrowserRouter,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",exact:true,render:function render(){return/*#__PURE__*/_jsx(LoginPage,{setToken:setToken});}}),/*#__PURE__*/_jsx(Route,{path:\"/register\",exact:true,render:function render(){return/*#__PURE__*/_jsx(RegisterPage,{setToken:setToken});}})]}):/*#__PURE__*/_jsx(BrowserRouter,{children:/*#__PURE__*/_jsx(Route,{path:\"/\",render:function render(){return/*#__PURE__*/_jsx(EventsHandler,{token:token,setToken:setToken,userInfo:userInfo});}})})});}export default App;","map":{"version":3,"sources":["/home/jf.gaviria/Cloud_Computing/Proyectos/proyecto_0/client/src/App.js"],"names":["BrowserRouter","Route","useEffect","useState","LoginPage","RegisterPage","httpClients","EventsHandler","App","loggedIn","setLoggedIn","userInfo","setUserInfo","token","setToken","newToken","sessionStorage","getItem","undefined","get","headers","then","response","data","catch","e"],"mappings":"kJAAA,OAAQA,aAAR,CAAuBC,KAAvB,KAAmC,kBAAnC,CACA,OAASC,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CACA,MAAOC,CAAAA,SAAP,KAAsB,wBAAtB,CACA,MAAOC,CAAAA,YAAP,KAAyB,2BAAzB,CACA,MAAOC,CAAAA,WAAP,KAAwB,eAAxB,CACA,MAAOC,CAAAA,aAAP,KAA0B,4BAA1B,CAEA;wFAGA,QAASC,CAAAA,GAAT,EAAe,CACb,cAAgCL,QAAQ,CAAC,KAAD,CAAxC,wCAAOM,QAAP,eAAiBC,WAAjB,eACA,eAAgCP,QAAQ,CAAC,IAAD,CAAxC,yCAAOQ,QAAP,eAAiBC,WAAjB,eACA,eAA0BT,QAAQ,CAAC,EAAD,CAAlC,yCAAOU,KAAP,eAAcC,QAAd,eAEAZ,SAAS,CAAE,UAAI,CACb,GAAMa,CAAAA,QAAQ,CAAGC,cAAc,CAACC,OAAf,CAAuB,OAAvB,CAAjB,CACA,GAAIF,QAAQ,EAAIA,QAAQ,EAAI,EAAxB,EAA8BA,QAAQ,EAAIG,SAA9C,CAAyDJ,QAAQ,CAACC,QAAD,CAAR,CACzDT,WAAW,CAACa,GAAZ,CAAgB,0BAAhB,CAA4C,CAC1CC,OAAO,CAAE,CACP,gBAAiB,UAAYL,QADtB,CADiC,CAA5C,EAIGM,IAJH,CAIQ,SAACC,QAAD,CAAY,CAClBV,WAAW,CAACU,QAAQ,CAACC,IAAV,CAAX,CACD,CAND,EAMGC,KANH,CAMS,SAACC,CAAD,CAAK,CACZb,WAAW,CAAC,IAAD,CAAX,CACD,CARD,EASD,CAZQ,CAYN,CAACC,KAAD,CAZM,CAAT,CAgBA,mBAEE,YAAK,SAAS,CAAE,kBAAhB,UACGA,KAAK,GAAG,EAAR,EAAcA,KAAK,GAAGK,SAAtB,EAAmC,CAACL,KAApC,cACC,MAAC,aAAD,yBACE,KAAC,KAAD,EAAO,IAAI,CAAC,GAAZ,CAAgB,KAAK,KAArB,CAAsB,MAAM,CAAE,qCAAM,KAAC,SAAD,EAAW,QAAQ,CAAEC,QAArB,EAAN,EAA9B,EADF,cAEE,KAAC,KAAD,EAAO,IAAI,CAAC,WAAZ,CAAwB,KAAK,KAA7B,CAA8B,MAAM,CAAI,qCAAM,KAAC,YAAD,EAAc,QAAQ,CAAEA,QAAxB,EAAN,EAAxC,EAFF,GADD,cAOC,KAAC,aAAD,wBACE,KAAC,KAAD,EAAO,IAAI,CAAC,GAAZ,CAAgB,MAAM,CAAE,qCAAM,KAAC,aAAD,EAAe,KAAK,CAAED,KAAtB,CAA6B,QAAQ,CAAEC,QAAvC,CAAiD,QAAQ,CAAEH,QAA3D,EAAN,EAAxB,EADF,EARJ,EAFF,CAgBD,CAED,cAAeH,CAAAA,GAAf","sourcesContent":["import {BrowserRouter, Route} from \"react-router-dom\";\nimport { useEffect, useState } from \"react\";\nimport LoginPage from \"./components/LoginPage\";\nimport RegisterPage from \"./components/RegisterPage\";\nimport httpClients from \"./httpClients\";\nimport EventsHandler from \"./components/EventsHandler\";\n\n// Context\n\n\nfunction App() {\n  const [loggedIn, setLoggedIn] = useState(false)\n  const [userInfo, setUserInfo] = useState(null)\n  const [token, setToken] = useState('')\n\n  useEffect( ()=>{\n    const newToken = sessionStorage.getItem('token')\n    if (newToken && newToken != \"\" && newToken != undefined) setToken(newToken)\n    httpClients.get('//172.24.41.232:8080/@me', {\n      headers: {\n        'Authorization': \"Bearer \" + newToken\n      }\n    }).then((response)=>{\n      setUserInfo(response.data)\n    }).catch((e)=>{\n      setUserInfo(null);\n    })\n  }, [token]);\n\n\n\n  return (\n    \n    <div className={'container_center'}>\n      {token==='' || token===undefined || !token?( \n        <BrowserRouter>\n          <Route path=\"/\" exact render={() => <LoginPage setToken={setToken}/>}/>\n          <Route path='/register' exact render = {() => <RegisterPage setToken={setToken}/>}/>\n          {/* <Route exact component={NotFound}/> */}\n        </BrowserRouter>\n      ):\n        <BrowserRouter>\n          <Route path=\"/\" render={() => <EventsHandler token={token} setToken={setToken} userInfo={userInfo}/>}/>\n        </BrowserRouter>\n    }\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}